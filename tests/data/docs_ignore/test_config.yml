# Test configuration for docs_ignore
# Migrated from legacy expected_output.txt / expected_missing.txt

files_must_exist:
- ./mkdocs.yml
- ./expected_output.txt
- ./docs
- ./docs/my_ugly_page.qmd
- ./docs/page.qmd
- ./docs/my_broken_page.qmd
- ./docs/index.md
- ./docs/page1.qmd
- ./expected_missing.txt
- ./site/404.html
- ./site/index.html
- ./site/css
- ./site/css/bootstrap.min.css
- ./site/css/base.css
- ./site/js
- ./site/js/base.js
- ./site/img
- ./site/img/favicon.ico
- ./site/img/grid.png
- ./site/sitemap.xml
- ./site/sitemap.xml.gz
- ./site/my_ugly_page
- ./site/my_ugly_page.qmd
- ./site/my_ugly_page/index.html
- ./site/my_ugly_page_files
- ./site/my_ugly_page_files/figure-markdown
- ./site/my_ugly_page_files/figure-markdown/mermaid-figure-1.png
- ./site/page/index.html
- ./site/page_files
- ./site/page_files/figure-markdown
- ./site/page_files/figure-markdown/mermaid-figure-1.png
- ./site/page.qmd
- ./site/my_broken_page.qmd
- ./site/page1.qmd
files_must_not_exist:
- ./site/my_broken_page.html
- ./site/my_broken_page_files
- ./site/page1.html
- ./site/page1_files
snapshots:
  - site/index.html
  - site/my_ugly_page/index.html
  - site/page/index.html
  - "!**/*.css"
  - "!**/*.js"
  - "!**/*.gz"
  - "!**/*.png"
  - "!**/*.svg"
  - "!**/*.ico"
  - "!**/404.html"
  - "!**/sitemap.xml"

normalize:
  - pattern: "**/*.html"
    regex: '<meta name="generator" content="[^"]*">'
    replace: '<meta name="generator" content="mkdocs">'
  - pattern: "**/*.html"
    regex: 'Build Date UTC : [0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2}\.[0-9]+\+00:00'
    replace: 'Build Date UTC : NORMALIZED'
  - pattern: "**/*.html"
    # <p><img alt="" src="../page_files/figure-markdown/mermaid-figure-1.png" />{width="2.13in"
    # height="2.9in"}</p>
    regex: '<p><img alt="" src="[^"]+"[ ]*/>{width="[0-9]+(\.[0-9]+)?in"'
    replace: '<p><img alt="" src="NORMALIZED"{width="NORMALIZED in"'
  - pattern: "**/*.html"
    regex: 'height="[0-9]+(\.[0-9]+)?in"}</p>'
    replace: 'height="NORMALIZED in"</p>'
