# Test configuration for docs_python
# Migrated from legacy expected_output.txt / expected_missing.txt

files_must_exist:
- ./mkdocs.yml
- ./docs/page.qmd
- ./docs/index.md
- ./site/page/index.html
- ./site/index.html
- ./site/404.html
- ./site/page.qmd
files_must_not_exist:
- ./docs/page.md
snapshots:
  - site/index.html
  - site/page/index.html
  - "!**/*.css"
  - "!**/*.js"
  - "!**/*.gz"
  - "!**/*.png"
  - "!**/*.svg"
  - "!**/*.ico"
  - "!**/404.html"
  - "!**/sitemap.xml"

normalize:
  - pattern: "**/*.html"
    regex: '<meta name="generator" content="[^"]*">'
    replace: '<meta name="generator" content="mkdocs">'
  - pattern: "**/*.html"
    regex: 'Build Date UTC : [0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2}\.[0-9]+\+00:00'
    replace: 'Build Date UTC : NORMALIZED'
  - pattern: "**/*.html"
    regex: '/.*/ipykernel_\d+/'
    replace: '/SOMEWHERE/ipykernel_XXXXX/'
  # Strip all ANSI escape codes from error tracebacks
  # This handles differences between Python 3.10 ([0;31m) and newer versions ([31m)
  - pattern: "**/*.html"
    regex: '\x1b\[[0-9;]*m'
    replace: 'ANSICODESTRIPPED'
