# Test configuration for Issue #69 (mkdocstrings compatibility)

# Files that must exist after build
files_must_exist:
  - ./mkdocs.yml
  - ./expected_output.txt
  - ./expected_missing.txt
  - ./docs
  - ./docs/index.md
  - ./docs/example.qmd
  - ./site/404.html
  - ./site/index.html
  - ./site/example/index.html
  - ./site/sitemap.xml
  - ./site/sitemap.xml.gz

# Files that must NOT exist after build
files_must_not_exist:
  - ./docs/example.md  # Should be cleaned up by plugin

# Snapshot these files (use ! prefix to exclude patterns)
snapshots:
  # Include the main HTML pages
  - site/index.html
  - site/example/index.html

  # Exclude assets and generated files
  - "!**/*.css"
  - "!**/*.js"
  - "!**/*.gz"
  - "!**/*.png"
  - "!**/*.svg"
  - "!**/*.ico"
  - "!**/404.html"
  - "!**/sitemap.xml"

# Normalize content before snapshotting (remove timestamps, etc.)
normalize:
  - pattern: "**/*.html"
    regex: '<meta name="generator" content="[^"]*">'
    replace: '<meta name="generator" content="mkdocs">'
  - pattern: "**/*.html"
    regex: 'Build Date UTC : [0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2}\.[0-9]+\+00:00'
    replace: 'Build Date UTC : NORMALIZED'
  - pattern: "**/*.html"
    regex: '<pre><code>/.*/ipykernel_[0-9]+/[0-9]+\.py:[0-9]+: UserWarning: This is a warning'
    replace: '<pre><code>/.*/ipykernel_XXXXX/1292902873.py:4: UserWarning: This is a warning'
      # <pre><code>/var/folders/42/tyvw22cj7t35kbjs0frhf_vw0000gp/T/ipykernel_XXXXX/1292902873.py:4: UserWarning: This is a warning
